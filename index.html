<!DOCTYPE html>
<html style='min-width: 100vw;'>

<head>
	<title>Etch-a-Sketch</title>
	<style>
		/* validation styling */
		#customInput:focus:invalid{
				box-shadow: 0 0 5px 1px #ff3333;
			}

		#customInput:valid {
			box-shadow: 0 0 5px 1px lime;
		}
	</style>

</head>

<body id="body" style='margin: 1rem; height: 90vh;'>
	<button id="btn">Custom Colored Grid</button>
	<div id="container"></div>

	<!--Javascript -->
	<script type="text/javascript">
		const container = document.getElementById('container');
		const btn = document.getElementById('btn');
		const customInput = document.createElement('input');
		const inputLabel = document.createElement('span');
		const subBtn = document.createElement('input');

		//contains styles for above variables
		function createStyles() {
			//button to create custom board
			btn.style.position = 'absolute';
			btn.style.width = '10rem';
			btn.style.left = 'calc(50% - 5rem)';
			btn.addEventListener('click', () => {
				btn.style.display = 'none';
				inputLabel.style.display = 'block';
				customInput.style.display = 'block';
				subBtn.style.display = 'block';
			});
			//input field - submits value to customBoard() on enter
			customInput.setAttribute('id', 'customInput');
			customInput.setAttribute('placeholder', 'Squares per side');
			customInput.setAttribute('type', 'number');
			customInput.setAttribute('required', 'true');
			customInput.setAttribute('min', '1');
			customInput.setAttribute('max', '50');
			customInput.style.position = 'absolute';
			customInput.style.width = '9.7rem';
			customInput.style.left = 'calc(50% - 5rem)';
			customInput.style.display = 'none';
			customInput.addEventListener('keyup', (e) => {
				e.preventDefault();
				if (e.keyCode === 13) {
					if (checkValid()) {
						customBoard(customInput.value)
						customInput.value = '';
					}
				}
			})
			//label left of input
			inputLabel.style.position = 'absolute';
			inputLabel.style.left = 'calc(50% - 9rem)';
			inputLabel.style.top = '1.15rem';
			inputLabel.innerHTML = 'MAX: 50'
			inputLabel.style.display = 'none';
			//button to right of input - submits value to customBoard() on click
			subBtn.setAttribute('type', 'submit');
			subBtn.style.position = 'absolute';
			subBtn.style.left = 'calc(60% - 5rem)';
			subBtn.style.display = 'none';
			subBtn.addEventListener('click', (e) => {
				e.preventDefault();
				if (checkValid()) {
					customBoard(customInput.value)
					customInput.value = '';
				}
			})
			document.body.prepend(customInput);
			//Etch-a-Sketch area
			container.style.display = 'grid';
			container.style.position = 'relative';
			container.style.top = '3rem';
			container.style.border = '1px solid black';
			container.style.width = '37rem';
			container.style.height = '37rem';
			container.style.margin = 'auto';
			container.style.gridTemplateColumns = `repeat(16, ${100/16}% )`;
			container.style.gridTemplateRows = `repeat(16, ${100/16}% )`;
			//insert label and submit btn next to input area
			customInput.insertAdjacentElement('afterend', inputLabel);
			customInput.insertAdjacentElement('afterend', subBtn);
		}

		//creates board - called from window.onload
		function createBoard() {
			for (i = 0; i < 256; i++) {
				const square = document.createElement('div');
				square.addEventListener('mouseover', e => {
					e.target.style.background = 'black';
				});
				document.getElementById('container').appendChild(square);
			}
		}

		//called on submit/enter press. Creates custom board w/ randomColor
		function customBoard(sq) {
			document.getElementById('container').innerHTML = '';
			container.style.gridTemplateColumns = `repeat(${sq}, ${100 /
					sq}% )`;
			container.style.gridTemplateRows = `repeat(${sq}, ${100 /
					sq}%  )`;

			for (i = 0; i < sq * sq; i++) {
				const box = document.createElement('div');
				box.addEventListener('mouseover', e => {
					e.target.style.background = randomColor();
				});
				container.appendChild(box);
			}
		}

		//called with customBoard/ makes the change color on each pass over
		function randomColor() {
			const letters = '0123456789ABCDEF';
			let color = '#';
			for (i = 0; i < 6; i++) {
				color += letters[Math.floor(Math.random() * 16)];
			}
			return color;
		}

		//check if input is > 0 and < 51
		function checkValid() {
			const rules = new RegExp('^([1-9]|[1-4][0-9]|(50))$')
			return rules.test(customInput.value);
		}

		//create syles and board onload - styles first or code breaks
		window.onload = function () {
			createStyles();
			createBoard();
			customInput.oninput = checkValid;
		}
	</script>
</body>

</html>